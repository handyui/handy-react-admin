(window["webpackJsonprefo-css"]=window["webpackJsonprefo-css"]||[]).push([[22],{1403:function(e,t,n){"use strict";var r=n(148),a=n(147),c=n(107),o=n(0),u=n.n(o),i=n(1470),l=n(1541),s=n(1535);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(n,!0).forEach(function(t){Object(a.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var d=Object(o.forwardRef)(function(e,t){var n=e.columns,a=e.rowKey,p=e.rowSelection,d=e.queryParams,b=e.pageOption,m=e.searchParam,y=e.getListFunc,O=e.type,h=e.onExpand,v=e.callback,g=Object(o.useState)([]),j=Object(c.a)(g,2),w=j[0],k=j[1],x=Object(o.useState)(!1),P=Object(c.a)(x,2),E=P[0],I=P[1],S=n.find(function(e){return"action"===(e.dataIndex||e.key)}),T=S?S.actions:[],z=u.a.useRef(!1),C=function(e){I(!0);var t=f({current:b.current,size:b.pageSize},d,{},m,{},e);y&&y(t).then(function(e){if(200===e.code&&!z.current){var n=e.result,r=n.records,a=n.current,c=n.size,o=n.total;v&&v({searchParam:t,pageOption:{current:a,pageSize:c,total:o}}),O&&"table-tree"===O&&r.forEach(function(e){e.children=[]}),k(r)}}).finally(function(){z.current||I(!1)})},D=function(t,n){return n({record:t,props:e},C)};Object(o.useEffect)(function(){return C(),function(){z.current=!0}},[]),Object(o.useImperativeHandle)(t,function(){return{refreshTable:function(e){C(e)}}});return u.a.createElement(s.a,{rowKey:a,rowSelection:p,columns:function(e){var t=[];return t.push.apply(t,Object(r.a)(e.filter(function(e){return"action"!==e.dataIndex}))),T.length>0&&t.push({title:"\u64cd\u4f5c",key:"action",render:function(e,t){return u.a.createElement(i.b,{size:"middle"},T.map(function(e,n){return["popconfirm"===e.type?u.a.createElement(l.a,{key:n,title:"\u60a8\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f",onConfirm:function(){return D(t,e.func)}},u.a.createElement("a",null,"\u5220\u9664")):"","text"===e.type?u.a.createElement("a",{key:n,onClick:function(){return D(t,e.func)}},e.text):""]}))}}),t}(n),dataSource:w,loading:E,pagination:f({},b,{onChange:function(e,t){var n={size:t||b.pageSize,current:e};v&&v({searchParam:m,pageOption:n}),C(n)},pageSizeOptions:["5","10","20","50"],showSizeChanger:!0}),onExpand:h})});d.defaultProps={pageOption:{current:1,pageSize:10},refreshTable:!1},t.a=d},1404:function(e,t){},1407:function(e,t,n){"use strict";var r=n(1403);n.d(t,"BasicTable",function(){return r.a});n(1404)},1412:function(e,t,n){"use strict";var r=n(0),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},c=n(10),o=function(e,t){return r.createElement(c.a,Object.assign({},e,{ref:t,icon:a}))};o.displayName="DeleteOutlined";t.a=r.forwardRef(o)},1478:function(e,t,n){"use strict";n.r(t);var r=n(147),a=n(42),c=n.n(a),o=n(77),u=n(107),i=n(0),l=n.n(i),s=n(1407),p=n(263),f=n(1394),d=n(638),b=n(115),m=n(640),y=n(1412),O=n(1405),h=n(69),v=n(84),g=n(50);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(n,!0).forEach(function(t){Object(r.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var k=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.filter(function(e){return e.parentId===n}).map(function(n){return{title:n.title,key:n.menuId,children:e(t,n.menuId),value:n.menuId}})};t.default=function(){var e=Object(i.useState)([]),t=Object(u.a)(e,2),n=t[0],r=t[1],a=Object(i.useState)(!1),j=Object(u.a)(a,2),x=j[0],P=(j[1],l.a.useState()),E=Object(u.a)(P,2)[1],I=l.a.useCallback(function(){return E({})},[]),S=Object(i.useRef)(null),T=Object(i.useRef)(null),z=Object(i.useRef)(null),C=Object(h.b)(),D=Object(g.l)(),F=D.pathname,R=D.state,q=Object(i.useState)({pageOption:{},searchParam:{}}),B=Object(u.a)(q,2),H=B[0],K=B[1],V={layout:{labelCol:{span:8},wrapperCol:{span:16}},grid:{rowGutter:10,colSpan:5},formItem:[{type:"select",label:"\u83dc\u5355\u7c7b\u578b",field:"menuType",value:void 0,props:{placeholder:"\u8bf7\u9009\u62e9\u7c7b\u578b"},options:[{label:"\u76ee\u5f55",value:"catalog"},{label:"\u83dc\u5355",value:"menu"},{label:"\u6309\u94ae",value:"button"}]},{type:"input",label:"\u83dc\u5355\u540d\u79f0",field:"title",value:"",props:{placeholder:"\u8bf7\u8f93\u5165\u83dc\u5355\u540d\u79f0"}}]},A={formItem:[{type:"tree-select",label:"\u4e0a\u7ea7\u6743\u9650",field:"parentId",value:"",loading:!0,props:{placeholder:"\u8bf7\u9009\u62e9\u4e0a\u7ea7\u6743\u9650",treeDefaultExpandAll:!0},asyncOptions:function(){var e=Object(o.a)(c.a.mark(function e(t,n){var r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.r)();case 2:return r=e.sent,e.abrupt("return",k(r.result));case 4:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()},{type:"select",label:"\u83dc\u5355\u7c7b\u578b",field:"menuType",value:void 0,props:{placeholder:"\u8bf7\u9009\u62e9\u7c7b\u578b"},options:[{label:"\u76ee\u5f55",value:"catalog"},{label:"\u83dc\u5355",value:"menu"}],rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u83dc\u5355\u7c7b\u578b"}]},{type:"input",label:"\u540d\u79f0",field:"title",value:"",props:{placeholder:"\u8bf7\u8f93\u5165\u540d\u79f0"},rules:[{required:!0,message:"\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a"}]},{type:"input",label:"\u8def\u7531\u5730\u5740",field:"menuPath",value:"",props:{placeholder:"\u8bf7\u8f93\u5165\u8def\u7531\u5730\u5740"},rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8def\u7531\u5730\u5740"}]},{type:"input",label:"\u83dc\u5355\u7f16\u7801",field:"menuCode",value:"",props:{placeholder:"\u8bf7\u8f93\u5165\u83dc\u5355\u7f16\u7801"},rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u83dc\u5355\u7f16\u7801"}]},{type:"input",label:"\u91cd\u5b9a\u5411\u5730\u5740",field:"redirect",value:"",props:{placeholder:"\u8bf7\u8f93\u5165\u91cd\u5b9a\u5411\u5730\u5740"}},{type:"input-number",label:"\u6392\u5e8f",field:"priority",value:"",props:{placeholder:"0"}},{type:"icon-select",label:"\u56fe\u6807",field:"icon",value:"",asyncValue:function(){var e=Object(o.a)(c.a.mark(function e(t,n){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()}]},G=[{title:"\u540d\u79f0",dataIndex:"title",key:"title"},{title:"url\u5730\u5740",dataIndex:"menuPath",key:"menuPath"},{title:"icon",dataIndex:"icon",key:"icon"},{title:"\u6392\u5e8f",dataIndex:"priority",key:"priority"},{title:"\u6309\u94ae\u7c7b\u578b",dataIndex:"menuType",key:"menuType",render:function(e){return"catalog"===e?"\u76ee\u5f55":"\u83dc\u5355"}},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"createTime",key:"createTime"},{title:"\u66f4\u65b0\u65f6\u95f4",dataIndex:"updateTime",key:"updateTime"},{title:"\u64cd\u4f5c",dataIndex:"action",actions:[{type:"popconfirm",key:"fileid",text:"\u5220\u9664",permission:{action:"delete",effect:"disabled"},props:{type:"danger"},func:function(){var e=Object(o.a)(c.a.mark(function e(t,n){var r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.record,e.next=3,Object(p.f)(r.menuId);case 3:n();case 4:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()},{type:"text",key:"fileid",text:"\u7f16\u8f91",props:{type:"warning"},func:function(e,t){var n=e.record;f.a.confirm({title:"\u7f16\u8f91\u83dc\u5355",icon:"",content:l.a.createElement(O.c,{ref:S,fields:n,dynamicValidateForm:A}),onOk:function(e){S.current.validateFields().then(function(){var t=Object(o.a)(c.a.mark(function t(r){var a,o,u,i;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=w({},n,{},r),t.next=3,Object(p.G)(a);case 3:o=t.sent,u=o.code,i=o.message,200===u?(d.b.success("".concat(i),1.5,function(){return e()}),z.current.refreshTable(),C(Object(v.d)())):d.b.error("".concat(i));case 7:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()).catch(function(){return console.log("\u51fa\u9519!")})}})}}]}],J=function(){var e=Object(o.a)(c.a.mark(function e(t,n){var r,a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("val",t,n),e.next=3,Object(p.B)({menuId:n.menuId,menuType:"menu"});case 3:r=e.sent,a=r.result,console.log("result",a),n.children=a,console.log("record===>",n),I();case 9:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),L=function(e){K({pageOption:H.pageOption,searchParam:e}),z.current.refreshTable(e)};Object(i.useEffect)(function(){R&&R.refresh&&"/system/access"===F&&(console.log("resData",H),L(H.searchParam))},[R]);return l.a.createElement("div",{className:"content"},l.a.createElement(O.a,{ref:T,dynamicValidateForm:V,callback:L,showBtn:!0},l.a.createElement(b.a,{type:"primary",ghost:!0,icon:l.a.createElement(m.a,null),onClick:function(){f.a.confirm({title:"\u65b0\u589e\u83dc\u5355",icon:"",content:l.a.createElement(O.c,{ref:S,dynamicValidateForm:A}),onOk:function(e){S.current.validateFields().then(function(){var t=Object(o.a)(c.a.mark(function t(n){var r,a,o;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(p.b)(n);case 2:r=t.sent,a=r.code,o=r.message,200===a?(d.b.success("".concat(o),1.5,function(){return e()}),z.current.refreshTable()):d.b.error("".concat(o));case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()).catch(function(){return console.log("\u51fa\u9519!")})},okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"})}}," \u6dfb\u52a0 "),l.a.createElement(b.a,{danger:!0,icon:l.a.createElement(y.a,null),onClick:function(){f.a.confirm({title:"\u63d0\u793a",icon:"",content:"\u60a8\u786e\u5b9a\u8981\u5220\u9664\u6240\u6709\u9009\u4e2d\u5417\uff1f",onOk:function(){var e=Object(o.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.g)(n.toString());case 2:z.current.refreshTable(),r([]);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()})}}," \u5220\u9664 ")),l.a.createElement(s.BasicTable,{ref:z,columns:G,getListFunc:p.A,queryParams:{menuType:"catalog"},rowKey:"menuId",rowSelection:{selectedRowKeys:n,onChange:function(e){r(e)}},refreshTable:x,type:"table-tree",onExpand:J,pageOption:H.pageOption,searchParam:H.searchParam,callback:function(e){return K(e)}}))}}}]);
//# sourceMappingURL=22.244b1f22.chunk.js.map