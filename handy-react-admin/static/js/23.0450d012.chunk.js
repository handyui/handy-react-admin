(window["webpackJsonprefo-css"]=window["webpackJsonprefo-css"]||[]).push([[23],{1403:function(e,t,r){"use strict";var n=r(148),a=r(147),c=r(107),o=r(0),u=r.n(o),i=r(1470),s=r(1541),l=r(1535);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(r,!0).forEach(function(t){Object(a.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var d=Object(o.forwardRef)(function(e,t){var r=e.columns,a=e.rowKey,p=e.rowSelection,d=e.queryParams,b=e.pageOption,m=e.searchParam,y=e.getListFunc,h=e.type,O=e.onExpand,v=e.callback,g=Object(o.useState)([]),w=Object(c.a)(g,2),j=w[0],x=w[1],k=Object(o.useState)(!1),E=Object(c.a)(k,2),I=E[0],P=E[1],S=r.find(function(e){return"action"===(e.dataIndex||e.key)}),z=S?S.actions:[],D=u.a.useRef(!1),C=function(e){P(!0);var t=f({current:b.current,size:b.pageSize},d,{},m,{},e);y&&y(t).then(function(e){if(200===e.code&&!D.current){var r=e.result,n=r.records,a=r.current,c=r.size,o=r.total;v&&v({searchParam:t,pageOption:{current:a,pageSize:c,total:o}}),h&&"table-tree"===h&&n.forEach(function(e){e.children=[]}),x(n)}}).finally(function(){D.current||P(!1)})},T=function(t,r){return r({record:t,props:e},C)};Object(o.useEffect)(function(){return C(),function(){D.current=!0}},[]),Object(o.useImperativeHandle)(t,function(){return{refreshTable:function(e){C(e)}}});return u.a.createElement(l.a,{rowKey:a,rowSelection:p,columns:function(e){var t=[];return t.push.apply(t,Object(n.a)(e.filter(function(e){return"action"!==e.dataIndex}))),z.length>0&&t.push({title:"\u64cd\u4f5c",key:"action",render:function(e,t){return u.a.createElement(i.b,{size:"middle"},z.map(function(e,r){return["popconfirm"===e.type?u.a.createElement(s.a,{key:r,title:"\u60a8\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f",onConfirm:function(){return T(t,e.func)}},u.a.createElement("a",null,"\u5220\u9664")):"","text"===e.type?u.a.createElement("a",{key:r,onClick:function(){return T(t,e.func)}},e.text):""]}))}}),t}(r),dataSource:j,loading:I,pagination:f({},b,{onChange:function(e,t){var r={size:t||b.pageSize,current:e};v&&v({searchParam:m,pageOption:r}),C(r)},pageSizeOptions:["5","10","20","50"],showSizeChanger:!0}),onExpand:O})});d.defaultProps={pageOption:{current:1,pageSize:10},refreshTable:!1},t.a=d},1404:function(e,t){},1407:function(e,t,r){"use strict";var n=r(1403);r.d(t,"BasicTable",function(){return n.a});r(1404)},1412:function(e,t,r){"use strict";var n=r(0),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},c=r(10),o=function(e,t){return n.createElement(c.a,Object.assign({},e,{ref:t,icon:a}))};o.displayName="DeleteOutlined";t.a=n.forwardRef(o)},1472:function(e,t,r){"use strict";r.r(t);var n=r(147),a=r(42),c=r.n(a),o=r(77),u=r(107),i=r(0),s=r.n(i),l=r(1407),p=r(263),f=r(1394),d=r(638),b=r(115),m=r(640),y=r(1412),h=r(1405),O=r(447),v=r(50);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(r,!0).forEach(function(t){Object(n.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}t.default=function(){var e=Object(i.useState)([]),t=Object(u.a)(e,2),r=t[0],n=t[1],a=Object(i.useRef)(null),g=Object(i.useRef)(null),j=Object(i.useRef)(null),x=Object(v.l)(),k=x.pathname,E=x.state,I=Object(i.useState)({pageOption:{},searchParam:{}}),P=Object(u.a)(I,2),S=P[0],z=P[1],D=function(e){return{formItem:[{type:"input",label:"\u7528\u6237\u540d",field:"account",value:"",props:{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d",disabled:"edit"===e||"detail"===e},rules:[{required:"edit"!==e&&"detail"!==e,message:"\u7528\u6237\u540d\u4e0d\u80fd\u4e3a\u7a7a"}]},{type:"input",label:"\u5bc6\u7801",field:"password",value:"",props:{type:"password",placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",disabled:"add"!==e},rules:[{required:"detail"!==e,message:"\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a"}]},{type:"input",label:"\u59d3\u540d",field:"name",value:"",props:{placeholder:"\u8bf7\u8f93\u5165\u59d3\u540d"},rules:[{required:!0,message:"\u59d3\u540d\u4e0d\u80fd\u4e3a\u7a7a"}]},{type:"radio",label:"\u6027\u522b",field:"sex",value:"",options:[{value:"M",label:"\u7537"},{value:"F",label:"\u5973"}],rules:[{required:!0,message:"\u6027\u522b\u4e0d\u80fd\u4e3a\u7a7a"}]},{type:"input",label:"\u624b\u673a\u53f7",field:"phone",value:"",props:{placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7"},rules:[{required:!0,message:"\u624b\u673a\u53f7\u4e0d\u80fd\u4e3a\u7a7a"}]},{type:"input",label:"\u90ae\u7bb1",field:"email",value:"",props:{placeholder:"\u8bf7\u8f93\u5165\u90ae\u7bb1"},rules:[{required:!0,message:"\u90ae\u7bb1\u4e0d\u80fd\u4e3a\u7a7a"}]},{type:"tree-select",label:"\u5355\u4f4d",field:"organizationId",value:void 0,loading:!0,props:{placeholder:"\u8bf7\u9009\u62e9\u5355\u4f4d",treeDefaultExpandAll:!1},asyncOptions:function(){var e=Object(o.a)(c.a.mark(function e(t,r){var n,a,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.u)();case 2:return n=e.sent,a=n.result,o=Object(O.b)(a[0]),e.abrupt("return",o?[o]:[]);case 6:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}()},{type:"multiple-select",label:"\u89d2\u8272",field:"roleId",value:void 0,loading:!0,props:{placeholder:"\u8bf7\u9009\u62e9\u89d2\u8272"},asyncOptions:function(){var e=Object(o.a)(c.a.mark(function e(){var t,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.w)({current:1,size:50});case 2:return t=e.sent,r=t.result,e.abrupt("return",r.records.map(function(e){return{label:e.roleName,value:e.roleId,key:e.roleId}}));case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),asyncValue:function(){var e=Object(o.a)(c.a.mark(function e(t,r){var n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.roleId,e.abrupt("return",n?n.toString().split(","):[]);case 2:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}()},{type:"switch",label:"\u72b6\u6001",field:"status",value:void 0,props:{},asyncValue:function(){var e=Object(o.a)(c.a.mark(function e(t,r){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return","n"!==r.status);case 1:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}()}],modalType:e}},C=function(){var e=Object(o.a)(c.a.mark(function e(t){var r,n,o,u;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.next=3,Object(p.x)(t.userId);case 3:n=e.sent,o=n.code,u=n.result,200===o&&(r=u),f.a.info({title:"",icon:"",content:s.a.createElement(h.c,{ref:a,fields:r,dynamicValidateForm:D("detail")}),onOk:function(e){e()},okText:"\u5173\u95ed"});case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),T=[{title:"\u7528\u6237\u540d",dataIndex:"account",key:"account",render:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var a=r[0];r[1];return s.a.createElement("a",{type:"text",onClick:function(){return C(a)}},e)}},{title:"\u59d3\u540d",dataIndex:"name",key:"name"},{title:"\u6027\u522b",dataIndex:"sex",key:"sex",render:function(e){return"M"===e?"\u7537":"\u5973"}},{title:"\u624b\u673a\u53f7",dataIndex:"phone",key:"phone"},{title:"\u90ae\u7bb1",dataIndex:"email",key:"email"},{title:"\u5355\u4f4d",dataIndex:"organizationName",key:"organizationName"},{title:"\u72b6\u6001",dataIndex:"status",key:"status",render:function(e){return"y"===e?"\u53ef\u7528":"\u4e0d\u53ef\u7528"}},{title:"\u64cd\u4f5c",dataIndex:"action",actions:[{type:"popconfirm",key:"fileid",text:"\u5220\u9664",permission:{action:"delete",effect:"disabled"},props:{type:"danger"},func:function(){var e=Object(o.a)(c.a.mark(function e(t,r){var n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.record,e.next=3,Object(p.k)({userId:n.userId});case 3:r();case 4:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}()},{type:"text",key:"fileid",text:"\u7f16\u8f91",props:{type:"warning"},func:function(){var e=Object(o.a)(c.a.mark(function e(t,r){var n,u,i,l,b;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.record,u={},e.next=4,Object(p.x)(n.userId);case 4:i=e.sent,l=i.code,b=i.result,200===l&&(u=b),f.a.confirm({title:"\u7f16\u8f91\u8d26\u53f7",icon:"",content:s.a.createElement(h.c,{ref:a,fields:u,dynamicValidateForm:D("edit")}),onOk:function(e){a.current.validateFields().then(function(){var t=Object(o.a)(c.a.mark(function t(r){var a,o,u,i;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("values.status",r.status),a=w({},n,{},r,{roleId:r.roleId.toString(),status:r.status?"y":"n"}),t.next=4,Object(p.J)(a);case 4:o=t.sent,u=o.code,i=o.message,200===u?(d.b.success("".concat(i),1.5,function(){return e()}),j.current.refreshTable()):d.b.error("".concat(i));case 8:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()).catch(function(){return console.log("\u51fa\u9519!")})}});case 9:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}()}]}],F=function(e){z({pageOption:S.pageOption,searchParam:e}),j.current.refreshTable(e)};Object(i.useEffect)(function(){E&&E.refresh&&"/system/account"===k&&(console.log("resData",S),F(S.searchParam))},[E]);return s.a.createElement("div",{className:"content"},s.a.createElement(h.a,{ref:g,dynamicValidateForm:{layout:{labelCol:{span:6},wrapperCol:{span:18}},grid:{rowGutter:10,colSpan:5},formItem:[{type:"input",label:"\u8d26\u53f7",field:"account",value:"",props:{placeholder:"\u8bf7\u8f93\u5165\u8d26\u53f7\u6216\u624b\u673a\u53f7"}},{type:"input",label:"\u7528\u6237\u540d",field:"name",value:"",props:{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u59d3\u540d"}},{type:"select",label:"\u72b6\u6001",field:"status",value:"",props:{placeholder:"\u8bf7\u9009\u62e9\u72b6\u6001"},options:[{label:"\u53ef\u7528",value:"y",key:"y"},{label:"\u4e0d\u53ef\u7528",value:"n",key:"n"}]}]},callback:F,showBtn:!0},s.a.createElement(b.a,{type:"primary",ghost:!0,icon:s.a.createElement(m.a,null),onClick:function(){f.a.confirm({title:"\u65b0\u589e\u7528\u6237",icon:"",content:s.a.createElement(h.c,{ref:a,dynamicValidateForm:D("add")}),onOk:function(e){a.current.validateFields().then(function(){var t=Object(o.a)(c.a.mark(function t(r){var n,a,o,u,i;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=w({},r,{roleId:r.roleId?r.roleId.toString():null,status:r.status?"y":"n"}),t.next=3,Object(p.E)(n);case 3:a=t.sent,o=a.code,u=a.message,i=a.result,200===o?(d.b.success("".concat(u),1.5,function(){return e()}),j.current.refreshTable()):d.b.error("".concat(u,",").concat(i));case 8:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()).catch(function(e){return console.log(e)})}})}}," \u6dfb\u52a0 "),s.a.createElement(b.a,{danger:!0,icon:s.a.createElement(y.a,null),onClick:function(){f.a.confirm({title:"\u63d0\u793a",icon:"",content:"\u60a8\u786e\u5b9a\u8981\u5220\u9664\u6240\u6709\u9009\u4e2d\u5417\uff1f",onOk:function(){var e=Object(o.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.l)(r.toString());case 2:j.current.refreshTable(),n([]);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()})}}," \u5220\u9664 ")),s.a.createElement(l.BasicTable,{ref:j,columns:T,getListFunc:p.z,rowKey:"userId",rowSelection:{selectedRowKeys:r,onChange:function(e){n(e)}},pageOption:S.pageOption,searchParam:S.searchParam,callback:function(e){return z(e)}}))}}}]);
//# sourceMappingURL=23.0450d012.chunk.js.map