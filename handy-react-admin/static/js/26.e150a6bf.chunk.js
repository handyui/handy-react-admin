(window["webpackJsonprefo-css"]=window["webpackJsonprefo-css"]||[]).push([[26],{1403:function(e,t,n){"use strict";var r=n(148),c=n(147),a=n(107),o=n(0),i=n.n(o),l=n(1470),u=n(1541),s=n(1535);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(n,!0).forEach(function(t){Object(c.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var p=Object(o.forwardRef)(function(e,t){var n=e.columns,c=e.rowKey,f=e.rowSelection,p=e.queryParams,b=e.pageOption,m=e.searchParam,O=e.getListFunc,y=e.type,h=e.onExpand,v=e.callback,j=Object(o.useState)([]),g=Object(a.a)(j,2),x=g[0],w=g[1],k=Object(o.useState)(!1),E=Object(a.a)(k,2),S=E[0],K=E[1],P=n.find(function(e){return"action"===(e.dataIndex||e.key)}),C=P?P.actions:[],I=i.a.useRef(!1),N=function(e){K(!0);var t=d({current:b.current,size:b.pageSize},p,{},m,{},e);O&&O(t).then(function(e){if(200===e.code&&!I.current){var n=e.result,r=n.records,c=n.current,a=n.size,o=n.total;v&&v({searchParam:t,pageOption:{current:c,pageSize:a,total:o}}),y&&"table-tree"===y&&r.forEach(function(e){e.children=[]}),w(r)}}).finally(function(){I.current||K(!1)})},D=function(t,n){return n({record:t,props:e},N)};Object(o.useEffect)(function(){return N(),function(){I.current=!0}},[]),Object(o.useImperativeHandle)(t,function(){return{refreshTable:function(e){N(e)}}});return i.a.createElement(s.a,{rowKey:c,rowSelection:f,columns:function(e){var t=[];return t.push.apply(t,Object(r.a)(e.filter(function(e){return"action"!==e.dataIndex}))),C.length>0&&t.push({title:"\u64cd\u4f5c",key:"action",render:function(e,t){return i.a.createElement(l.b,{size:"middle"},C.map(function(e,n){return["popconfirm"===e.type?i.a.createElement(u.a,{key:n,title:"\u60a8\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f",onConfirm:function(){return D(t,e.func)}},i.a.createElement("a",null,"\u5220\u9664")):"","text"===e.type?i.a.createElement("a",{key:n,onClick:function(){return D(t,e.func)}},e.text):""]}))}}),t}(n),dataSource:x,loading:S,pagination:d({},b,{onChange:function(e,t){var n={size:t||b.pageSize,current:e};v&&v({searchParam:m,pageOption:n}),N(n)},pageSizeOptions:["5","10","20","50"],showSizeChanger:!0}),onExpand:h})});p.defaultProps={pageOption:{current:1,pageSize:10},refreshTable:!1},t.a=p},1404:function(e,t){},1407:function(e,t,n){"use strict";var r=n(1403);n.d(t,"BasicTable",function(){return r.a});n(1404)},1412:function(e,t,n){"use strict";var r=n(0),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},a=n(10),o=function(e,t){return r.createElement(a.a,Object.assign({},e,{ref:t,icon:c}))};o.displayName="DeleteOutlined";t.a=r.forwardRef(o)},1540:function(e,t,n){"use strict";n.r(t);var r=n(147),c=n(42),a=n.n(c),o=n(77),i=n(107),l=n(0),u=n.n(l),s=n(1407),f=n(263),d=n(1394),p=n(638),b=n(115),m=n(640),O=n(1412),y=n(1405),h=n(1388),v=n(3),j=n(1),g=n(1457),x=n(4),w=n.n(x),k=n(67),E=n(9),S=n(620),K=n.n(S),P=n(1420),C=n(1413),I=n(1463),N={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"},D=n(10),z=function(e,t){return l.createElement(D.a,Object.assign({},e,{ref:t,icon:N}))};z.displayName="FolderOpenOutlined";var H=l.forwardRef(z),R={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"},T=function(e,t){return l.createElement(D.a,Object.assign({},e,{ref:t,icon:R}))};T.displayName="FolderOutlined";var L,F=l.forwardRef(T),V=n(117);function A(e,t){e.forEach(function(e){var n=e.key,r=e.children;!1!==t(n,e)&&A(r||[],t)})}function B(e){var t=e.treeData,n=e.expandedKeys,r=e.startKey,c=e.endKey,a=[],o=L.None;if(r&&r===c)return[r];if(!r||!c)return[];return A(t,function(e){if(o===L.End)return!1;if(function(e){return e===r||e===c}(e)){if(a.push(e),o===L.None)o=L.Start;else if(o===L.Start)return o=L.End,!1}else o===L.Start&&a.push(e);return-1!==n.indexOf(e)}),a}function M(e,t){var n=Object(k.a)(t),r=[];return A(e,function(e,t){var c=n.indexOf(e);return-1!==c&&(r.push(t),n.splice(c,1)),!!n.length}),r}!function(e){e[e.None=0]="None",e[e.Start=1]="Start",e[e.End=2]="End"}(L||(L={}));var q=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var c=0;for(r=Object.getOwnPropertySymbols(e);c<r.length;c++)t.indexOf(r[c])<0&&Object.prototype.propertyIsEnumerable.call(e,r[c])&&(n[r[c]]=e[r[c]])}return n};function J(e){var t=e.isLeaf,n=e.expanded;return t?l.createElement(I.a,null):n?l.createElement(H,null):l.createElement(F,null)}function G(e){var t=e.treeData,n=e.children;return t||Object(C.c)(n)}var Q=function(e,t){var n=e.defaultExpandAll,r=e.defaultExpandParent,c=e.defaultExpandedKeys,a=q(e,["defaultExpandAll","defaultExpandParent","defaultExpandedKeys"]),o=l.useRef(),i=l.useRef(),u=l.createRef();l.useImperativeHandle(t,function(){return u.current});var s=l.useState(a.selectedKeys||a.defaultSelectedKeys||[]),f=Object(E.a)(s,2),d=f[0],p=f[1],b=l.useState(function(){var e=Object(C.a)(G(a)).keyEntities;return n?Object.keys(e):r?Object(P.e)(a.expandedKeys||c,e):a.expandedKeys||c}()),m=Object(E.a)(b,2),O=m[0],y=m[1];l.useEffect(function(){"selectedKeys"in a&&p(a.selectedKeys)},[a.selectedKeys]),l.useEffect(function(){"expandedKeys"in a&&y(a.expandedKeys)},[a.expandedKeys]);var h=K()(function(e,t){t.isLeaf||e.shiftKey||e.metaKey||e.ctrlKey||u.current.onNodeExpand(e,t)},200,{leading:!0}),g=l.useContext(V.b),x=g.getPrefixCls,S=g.direction,I=a.prefixCls,N=a.className,D=q(a,["prefixCls","className"]),z=x("tree",I),H=w()("".concat(z,"-directory"),Object(v.a)({},"".concat(z,"-directory-rtl"),"rtl"===S),N);return l.createElement(ee,Object(j.a)({icon:J,ref:u,blockNode:!0},D,{prefixCls:z,className:H,expandedKeys:O,selectedKeys:d,onSelect:function(e,t){var n,r=a.multiple,c=t.node,l=t.nativeEvent,u=c.key,s=void 0===u?"":u,f=G(a),d=Object(j.a)(Object(j.a)({},t),{selected:!0}),b=l.ctrlKey||l.metaKey,m=l.shiftKey;r&&b?(n=e,o.current=s,i.current=n,d.selectedNodes=M(f,n)):r&&m?(n=Array.from(new Set([].concat(Object(k.a)(i.current||[]),Object(k.a)(B({treeData:f,expandedKeys:O,startKey:s,endKey:o.current}))))),d.selectedNodes=M(f,n)):(n=[s],o.current=s,i.current=n,d.selectedNodes=M(f,n)),a.onSelect&&a.onSelect(n,d),"selectedKeys"in a||p(n)},onClick:function(e,t){"click"===a.expandAction&&h(e,t),a.onClick&&a.onClick(e,t)},onDoubleClick:function(e,t){"doubleClick"===a.expandAction&&h(e,t),a.onDoubleClick&&a.onDoubleClick(e,t)},onExpand:function(e,t){if("expandedKeys"in a||y(e),a.onExpand)return a.onExpand(e,t)}}))},U=l.forwardRef(Q);U.displayName="DirectoryTree",U.defaultProps={showIcon:!0,expandAction:"click"};var W=U,X=n(619),Y=n(1458),Z=4;function $(e){var t,n=e.dropPosition,r=e.dropLevelOffset,c=e.prefixCls,a=e.indent,o=e.direction,i=void 0===o?"ltr":o,l="ltr"===i?"left":"right",s="ltr"===i?"right":"left",f=(t={},Object(v.a)(t,l,-r*a+Z),Object(v.a)(t,s,0),t);switch(n){case-1:f.top=-3;break;case 1:f.bottom=-3;break;default:f.bottom=-3,f[l]=a+Z}return u.a.createElement("div",{style:f,className:"".concat(c,"-drop-indicator")})}var _=l.forwardRef(function(e,t){var n,r=l.useContext(V.b),c=r.getPrefixCls,a=r.direction,o=r.virtual,i=e.prefixCls,u=e.className,s=e.showIcon,f=e.showLine,d=e.switcherIcon,p=e.blockNode,b=e.children,m=e.checkable,O=e.selectable,y=c("tree",i),h=Object(j.a)(Object(j.a)({},e),{showLine:Boolean(f),dropIndicatorRender:$});return l.createElement(g.b,Object(j.a)({itemHeight:20,ref:t,virtual:o},h,{prefixCls:y,className:w()((n={},Object(v.a)(n,"".concat(y,"-icon-hide"),!s),Object(v.a)(n,"".concat(y,"-block-node"),p),Object(v.a)(n,"".concat(y,"-unselectable"),!O),Object(v.a)(n,"".concat(y,"-rtl"),"rtl"===a),n),u),direction:a,checkable:m?l.createElement("span",{className:"".concat(y,"-checkbox-inner")}):m,selectable:O,switcherIcon:function(e){return Object(Y.a)(y,d,f,e)}}),b)});_.TreeNode=g.a,_.DirectoryTree=W,_.defaultProps={checkable:!1,selectable:!0,showIcon:!1,motion:Object(j.a)(Object(j.a)({},X.a),{motionAppear:!1}),blockNode:!1};var ee=_,te=ee,ne=Object(l.forwardRef)(function(e,t){var n=e.fields,r=Object(l.useState)(!1),c=Object(i.a)(r,2),s=c[0],d=c[1],p=Object(l.useState)([]),b=Object(i.a)(p,2),m=b[0],O=b[1],y=Object(l.useState)([]),v=Object(i.a)(y,2),j=v[0],g=v[1],x=Object(l.useState)([]),w=Object(i.a)(x,2),k=w[0],E=w[1],S=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.filter(function(e){return e.parentId===n}).map(function(n){return{title:n.title,key:n.menuId,children:e(t,n.menuId)}})},K=function(){var e=Object(o.a)(a.a.mark(function e(){var t,n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,Object(f.r)().finally(function(){return d(!1)});case 3:t=e.sent,n=t.result,O(S(n));case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(o.a)(a.a.mark(function e(){var t,r,c;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={exceptMenuType:null,roleIds:[n.roleId]},e.next=3,Object(f.v)(t);case 3:r=e.sent,c=r.result,E(c.map(function(e){return e.menuId})),g(c.filter(function(e){return 0!==e.parentId}).map(function(e){return e.menuId}));case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();Object(l.useEffect)(function(){K(),P()},[]);return Object(l.useImperativeHandle)(t,function(){return{checkedKeys:function(){return console.log("checkedKeys333",k),k}}}),u.a.createElement(h.a,{spinning:s},u.a.createElement(te,{ref:t,checkable:!0,defaultSelectedKeys:j,autoExpandParent:!0,onCheck:function(e){console.log("checkedKeys222===>",e),E(e)},checkedKeys:k,treeData:m}))}),re=n(69),ce=n(84),ae=n(50);function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(n,!0).forEach(function(t){Object(r.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}t.default=function(){var e=Object(l.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(l.useRef)(null),h=Object(l.useRef)(null),v=Object(l.useRef)(null),j=Object(re.b)(),g=Object(ae.l)(),x=g.pathname,w=g.state,k=Object(l.useState)({pageOption:{},searchParam:{}}),E=Object(i.a)(k,2),S=E[0],K=E[1],P=function(e){return{formItem:[{type:"input",label:"\u89d2\u8272\u540d\u79f0",field:"roleName",value:"6666",props:{placeholder:"\u8bf7\u8f93\u5165\u89d2\u8272\u540d\u79f0"},rules:[{required:!0,message:"\u89d2\u8272\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a"}]},{type:"input",label:"\u89d2\u8272\u7f16\u7801",field:"roleCode",value:"",props:{placeholder:"\u89d2\u8272\u7f16\u7801"},rules:[{required:!0,message:"\u89d2\u8272\u7f16\u7801\u4e0d\u80fd\u4e3a\u7a7a"}]},{type:"input-number",label:"\u6392\u5e8f",field:"sort",value:"",props:{placeholder:"0"},rules:[{required:!0,message:"\u89d2\u8272\u6392\u5e8f\u4e0d\u80fd\u4e3a\u7a7a"}]}],modalType:e}},C=Object(l.useRef)(null),I=function(e){d.a.info({title:"",icon:"",content:u.a.createElement(y.c,{ref:c,fields:e,dynamicValidateForm:P("detail")}),onOk:function(e){e()},okText:"\u5173\u95ed"})},N=[{title:"\u89d2\u8272\u540d",dataIndex:"roleName",key:"roleName",render:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var c=n[0];n[1];return u.a.createElement("a",{type:"text",onClick:function(){return I(c)}},e)}},{title:"\u89d2\u8272\u7f16\u7801",dataIndex:"roleCode",key:"roleCode"},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"createTime",key:"createTime"},{title:"\u64cd\u4f5c",dataIndex:"action",actions:[{type:"popconfirm",key:"fileid",text:"\u5220\u9664",permission:{action:"delete",effect:"disabled"},props:{type:"danger"},func:function(){var e=Object(o.a)(a.a.mark(function e(t,n){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.record,e.next=3,Object(f.i)(r.roleId);case 3:n();case 4:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()},{type:"text",key:"fileid",text:"\u7f16\u8f91",props:{type:"warning"},func:function(e,t){var n=e.record;d.a.confirm({title:"\u7f16\u8f91\u89d2\u8272",icon:"",content:u.a.createElement(y.c,{ref:c,fields:n,dynamicValidateForm:P("edit")}),onOk:function(e){var t=n.roleId,r=n.version;c.current.validateFields().then(function(){var n=Object(o.a)(a.a.mark(function n(c){var o,i,l,u;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o=ie({roleId:t,version:r},c),console.log("params",o),n.next=4,Object(f.I)(o);case 4:i=n.sent,l=i.code,u=i.message,200===l?(p.b.success("".concat(u),1.5,function(){return e()}),v.current.refreshTable()):p.b.error("".concat(u));case 8:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()).catch(function(){return console.log("\u51fa\u9519!")})}})}},{type:"text",key:"fileid",text:"\u5173\u8054\u6743\u9650",props:{type:"warning"},func:function(e,t){var n=e.record;console.log("record",n),d.a.confirm({title:"\u5173\u8054\u6743\u9650",icon:"",content:u.a.createElement(ne,{ref:C,fields:n}),onOk:function(e){return new Promise(function(){var t=Object(o.a)(a.a.mark(function t(r,c){var o,i,l,u;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o={roleId:n.roleId,menuIds:C.current.checkedKeys()},t.next=3,Object(f.C)(o);case 3:i=t.sent,l=i.code,u=i.message,200===l?(p.b.success("".concat(u),1.5,function(){return e()}),r(null),v.current.refreshTable(),j(Object(ce.d)())):(p.b.error("".concat(u)),c());case 7:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()).catch(function(){})}})}}]}],D=function(e){K({pageOption:S.pageOption,searchParam:e}),v.current.refreshTable(e)};Object(l.useEffect)(function(){w&&w.refresh&&"/system/role"===x&&(console.log("resData",S),D(S.searchParam))},[w]);return u.a.createElement("div",{className:"content"},u.a.createElement(y.a,{ref:h,dynamicValidateForm:{layout:{labelCol:{span:6},wrapperCol:{span:18}},grid:{rowGutter:10,colSpan:5},formItem:[{type:"input",label:"\u89d2\u8272\u540d",field:"roleName",value:"",props:{placeholder:"\u8bf7\u8f93\u5165\u89d2\u8272\u540d"}},{type:"input",label:"\u89d2\u8272\u7f16\u7801",field:"roleCode",value:"",props:{placeholder:"\u8bf7\u8f93\u5165\u89d2\u8272\u7f16\u7801"},tailLayout:{labelCol:{span:8},wrapperCol:{span:16}}}]},callback:D,showBtn:!0},u.a.createElement(b.a,{type:"primary",ghost:!0,icon:u.a.createElement(m.a,null),onClick:function(){d.a.confirm({title:"\u65b0\u589e\u89d2\u8272",icon:"",content:u.a.createElement(y.c,{ref:c,dynamicValidateForm:P("add")}),onOk:function(e){c.current.validateFields().then(function(){var t=Object(o.a)(a.a.mark(function t(n){var r,c,o;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(f.D)(n);case 2:r=t.sent,c=r.code,o=r.message,200===c?(p.b.success("".concat(o),1.5,function(){return e()}),v.current.refreshTable()):p.b.error("".concat(o));case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()).catch(function(){return console.log("\u51fa\u9519!")})}})}}," \u6dfb\u52a0 "),u.a.createElement(b.a,{danger:!0,icon:u.a.createElement(O.a,null),onClick:function(){d.a.confirm({title:"\u63d0\u793a",icon:"",content:"\u60a8\u786e\u5b9a\u8981\u5220\u9664\u6240\u6709\u9009\u4e2d\u5417\uff1f",onOk:function(){var e=Object(o.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.j)(n.toString());case 2:v.current.refreshTable(),r([]);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()})}}," \u5220\u9664 ")),u.a.createElement(s.BasicTable,{ref:v,columns:N,getListFunc:f.w,rowKey:"roleId",rowSelection:{selectedRowKeys:n,onChange:function(e){r(e)}},pageOption:S.pageOption,searchParam:S.searchParam,callback:function(e){return K(e)}}))}}}]);
//# sourceMappingURL=26.e150a6bf.chunk.js.map