(window["webpackJsonprefo-css"]=window["webpackJsonprefo-css"]||[]).push([[25],{1403:function(e,t,r){"use strict";var n=r(148),a=r(147),c=r(107),o=r(0),i=r.n(o),u=r(1470),s=r(1541),l=r(1535);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(r,!0).forEach(function(t){Object(a.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var d=Object(o.forwardRef)(function(e,t){var r=e.columns,a=e.rowKey,p=e.rowSelection,d=e.queryParams,b=e.pageOption,O=e.searchParam,m=e.getListFunc,y=e.type,h=e.onExpand,g=e.callback,v=Object(o.useState)([]),j=Object(c.a)(v,2),w=j[0],k=j[1],x=Object(o.useState)(!1),E=Object(c.a)(x,2),P=E[0],S=E[1],z=r.find(function(e){return"action"===(e.dataIndex||e.key)}),I=z?z.actions:[],C=i.a.useRef(!1),D=function(e){S(!0);var t=f({current:b.current,size:b.pageSize},d,{},O,{},e);m&&m(t).then(function(e){if(200===e.code&&!C.current){var r=e.result,n=r.records,a=r.current,c=r.size,o=r.total;g&&g({searchParam:t,pageOption:{current:a,pageSize:c,total:o}}),y&&"table-tree"===y&&n.forEach(function(e){e.children=[]}),k(n)}}).finally(function(){C.current||S(!1)})},T=function(t,r){return r({record:t,props:e},D)};Object(o.useEffect)(function(){return D(),function(){C.current=!0}},[]),Object(o.useImperativeHandle)(t,function(){return{refreshTable:function(e){D(e)}}});return i.a.createElement(l.a,{rowKey:a,rowSelection:p,columns:function(e){var t=[];return t.push.apply(t,Object(n.a)(e.filter(function(e){return"action"!==e.dataIndex}))),I.length>0&&t.push({title:"\u64cd\u4f5c",key:"action",render:function(e,t){return i.a.createElement(u.b,{size:"middle"},I.map(function(e,r){return["popconfirm"===e.type?i.a.createElement(s.a,{key:r,title:"\u60a8\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f",onConfirm:function(){return T(t,e.func)}},i.a.createElement("a",null,"\u5220\u9664")):"","text"===e.type?i.a.createElement("a",{key:r,onClick:function(){return T(t,e.func)}},e.text):""]}))}}),t}(r),dataSource:w,loading:P,pagination:f({},b,{onChange:function(e,t){var r={size:t||b.pageSize,current:e};g&&g({searchParam:O,pageOption:r}),D(r)},pageSizeOptions:["5","10","20","50"],showSizeChanger:!0}),onExpand:h})});d.defaultProps={pageOption:{current:1,pageSize:10},refreshTable:!1},t.a=d},1404:function(e,t){},1407:function(e,t,r){"use strict";var n=r(1403);r.d(t,"BasicTable",function(){return n.a});r(1404)},1412:function(e,t,r){"use strict";var n=r(0),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},c=r(10),o=function(e,t){return n.createElement(c.a,Object.assign({},e,{ref:t,icon:a}))};o.displayName="DeleteOutlined";t.a=n.forwardRef(o)},1475:function(e,t,r){"use strict";r.r(t);var n=r(147),a=r(42),c=r.n(a),o=r(77),i=r(107),u=r(0),s=r.n(u),l=r(1407),p=r(263),f=r(1394),d=r(638),b=r(115),O=r(640),m=r(1412),y=r(1405),h=r(447),g=r(50);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(r,!0).forEach(function(t){Object(n.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}t.default=function(){var e=Object(u.useState)([]),t=Object(i.a)(e,2),r=t[0],n=t[1],a=Object(u.useRef)(null),v=Object(u.useRef)(null),w=Object(u.useRef)(null),k=Object(g.l)(),x=k.pathname,E=k.state,P=Object(u.useState)({pageOption:{},searchParam:{}}),S=Object(i.a)(P,2),z=S[0],I=S[1],C={layout:{labelCol:{span:8},wrapperCol:{span:16}},grid:{rowGutter:10,colSpan:5},formItem:[{type:"input",label:"\u5355\u4f4d\u540d\u79f0",field:"orgName",value:"",props:{placeholder:"\u8bf7\u8f93\u5165\u5355\u4f4d\u540d\u79f0"}},{type:"tree-select",label:"\u4e0a\u7ea7\u5355\u4f4d",field:"parentId",value:"",loading:!0,props:{placeholder:"\u8bf7\u9009\u62e9\u7c7b\u578b",treeDefaultExpandAll:!0},asyncOptions:function(){var e=Object(o.a)(c.a.mark(function e(t,r){var n,a,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.u)();case 2:return n=e.sent,a=n.result,console.log("result",a),o=Object(h.b)(a[0]),e.abrupt("return",o?[o]:[]);case 7:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}()}]},D={formItem:[{type:"tree-select",label:"\u4e0a\u7ea7\u5355\u4f4d",field:"parentId",value:"",loading:!0,props:{placeholder:"\u8bf7\u9009\u62e9\u7c7b\u578b",treeDefaultExpandAll:!0},asyncOptions:function(){var e=Object(o.a)(c.a.mark(function e(t,r){var n,a,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.u)();case 2:return n=e.sent,a=n.result,o=Object(h.b)(a[0]),e.abrupt("return",o?[o]:[]);case 6:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}(),rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u4e0a\u7ea7\u5355\u4f4d"}]},{type:"input",label:"\u5355\u4f4d\u540d\u79f0",field:"orgName",value:"",props:{placeholder:"\u8bf7\u8f93\u5165\u5355\u4f4d\u540d\u79f0"},rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5355\u4f4d\u540d\u79f0"}]},{type:"input",label:"\u5355\u4f4d\u7f16\u7801",field:"orgCode",value:"",props:{placeholder:"\u8bf7\u8f93\u5165\u5355\u4f4d\u7f16\u7801"},rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5355\u4f4d\u7f16\u7801"}]},{type:"input-number",label:"\u6392\u5e8f",field:"priority",value:0,props:{placeholder:0}}]},T=[{title:"\u5355\u4f4d\u540d\u79f0",dataIndex:"orgName",key:"orgName"},{title:"\u5355\u4f4d\u7f16\u7801",dataIndex:"orgCode",key:"orgCode"},{title:"\u4e0a\u7ea7\u5355\u4f4d",dataIndex:"parentName",key:"parentName"},{title:"\u6392\u5e8f",dataIndex:"priority",key:"priority"},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"createTime",key:"createTime"},{title:"\u64cd\u4f5c",dataIndex:"action",actions:[{type:"popconfirm",key:"fileid",text:"\u5220\u9664",props:{type:"danger"},func:function(){var e=Object(o.a)(c.a.mark(function e(t,r){var n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.record,e.next=3,Object(p.d)(n.id);case 3:r();case 4:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}()},{type:"text",key:"fileid",text:"\u7f16\u8f91",props:{type:"warning"},func:function(e,t){var r=e.record;f.a.confirm({title:"\u7f16\u8f91\u5355\u4f4d",icon:"",content:s.a.createElement(y.c,{ref:a,fields:r,dynamicValidateForm:D}),onOk:function(e){a.current.validateFields().then(function(){var t=Object(o.a)(c.a.mark(function t(n){var a,o,i,u;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=j({},r,{},n),t.next=3,Object(p.H)(a);case 3:o=t.sent,i=o.code,u=o.message,200===i?(d.b.success("".concat(u),1.5,function(){return e()}),w.current.refreshTable()):d.b.error("".concat(u));case 7:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()).catch(function(){return console.log("\u51fa\u9519!")})}})}}]}],N=Object(u.useState)(C),F=Object(i.a)(N,2),R=F[0],H=(F[1],function(e){I({pageOption:z.pageOption,searchParam:e}),w.current.refreshTable(e)});Object(u.useEffect)(function(){E&&E.refresh&&"/system/organization"===x&&H(z.searchParam)},[E]);return s.a.createElement("div",{className:"content"},s.a.createElement(y.a,{ref:v,dynamicValidateForm:R,callback:H,showBtn:!0},s.a.createElement(b.a,{type:"primary",ghost:!0,icon:s.a.createElement(O.a,null),onClick:function(){f.a.confirm({title:"\u65b0\u589e\u5355\u4f4d",icon:"",content:s.a.createElement(y.c,{ref:a,dynamicValidateForm:D}),onOk:function(e){a.current.validateFields().then(function(){var t=Object(o.a)(c.a.mark(function t(r){var n,a,o;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(p.c)(r);case 2:n=t.sent,a=n.code,o=n.message,200===a?(d.b.success("".concat(o),1.5,function(){return e()}),w.current.refreshTable()):d.b.error("".concat(o));case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()).catch(function(){return console.log("\u51fa\u9519!")})}})}}," \u6dfb\u52a0 "),s.a.createElement(b.a,{danger:!0,icon:s.a.createElement(m.a,null),onClick:function(){f.a.confirm({title:"\u63d0\u793a",icon:"",content:"\u60a8\u786e\u5b9a\u8981\u5220\u9664\u6240\u6709\u9009\u4e2d\u5417\uff1f",onOk:function(){var e=Object(o.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.h)({ids:r.toString()});case 2:w.current.refreshTable(),n([]);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()})}}," \u5220\u9664 ")),s.a.createElement(l.BasicTable,{ref:w,columns:T,getListFunc:p.t,rowKey:"id",rowSelection:{selectedRowKeys:r,onChange:function(e){n(e)}},pageOption:z.pageOption,searchParam:z.searchParam,callback:function(e){return I(e)}}))}}}]);
//# sourceMappingURL=25.d9a9e76a.chunk.js.map